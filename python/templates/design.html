<html>

<head>
    <title>ezMarker - Design</title>
</head>

<body>
    <script src="../static/js/toc_generator.js"></script>
    <h1>ezMarker - Design</h1>
    <p>Version 1.0</p>
    <p>Last updated: October 23, 2017</p>

    <div id="toc">
        <h2>Table of Contents</h2>
    </div>

    <h2>Introduction</h2>
    <p>
        ezMarker is a web application that allows instructors at Wilfrid Laurier University to bulk upload grades and feedback into MyLearningSpace,with the integration of the Brightspace API supported by D2L. The goal of ezMarker is to solve the issues regarding inefficient manual grade uploading and and feedback through the current MyLearningSpace interface. On average, it can take markers a few hours to physically upload grades for one class. Marking time is cut down to minutes with the use of ezMarker's bulk file uploading features.</p>
    <p>This documement describes the packages, front-end, back-end, and project structure of ezMarker.</p>

    <h2>Packages</h2>
    <p>There are PHP and Python versions of ezMarker. Both versions use corresponding versions of the Brightspace API Wrapper to communicate with the Brightspace Instance. The differences between the PHP and Python versions of ezMarker are described in the following two sections.</p>

    <h3>PHP</h3>

    <p>

        <a href="http://php.net/manual/en/intro-whatis.php">PHP </a>(Hypertext Preprocessor) is a server-side scripting langauge, meaning it is executed by the server. It is being used for ezMarker's back-end. For this project, an <a href="https://aws.amazon.com/">AWS</a> (Amazon Web Services) Ubuntu server is being used to host the PHP website. Ubuntu supports <a href="https://www.apache.org/">Apache</a> which is an open-source HTTP Server that can serve websites with a PHP backend.

    </p>
    <h3>Python</h3>
    <p>
        <a href="https://www.python.org/">Python</a> is the scripting language that is being used to for ezMarker's back-end. <a href="http://flask.pocoo.org/">Flask</a>, a Python microframework with a built-in development server and debugger, is being used to make this web application. To host the Python project, <a href="https://dashboard.heroku.com/apps">Herokuapp</a> app will be used because of its support for Flask Apps.

    </p>

    <h3>Package Diagram</h3>

    <img class="prototype-img" src="../static/img/Packages.png">

    <h2>User Interface Design</h2>
    <h3>Login Page</h3>
    <p>Brightspace takes care of generating the page and handling input.</p>
    <h3>Course List Page</h3>
    <p> This page has the list of courses and grade items the user has access to modify.</p>
    <img class="prototype-img" src="../static/img/course_list.png" />
    <table border="1">
        <col width="200">
        <col width="200">
        <col width="400">
        <tr>
            <th align="left">Field</th>
            <th align="left">Type</th>
            <th align="left">Description</th>
        </tr>
        <tr>
            <td>Course (Sorted by Course ID)</td>
            <td>Collapsible</td>
            <td>After clicking the course, it shows the available grade items in the course to be modified by the user</td>
        </tr>
        <tr>
            <td>Grade Item</td>
            <td>Hyperlink</td>
            <td>Enters upload grade page for the grade item</td>
        </tr>
    </table>
    <h3>Upload Grade Page</h3>
    <img class="prototype-img" src="../static/img/upload_grade.png">
    <table border="1">
        <col width="200">
        <col width="200">
        <col width="400">
        <tr>
            <th align="left">Field</th>
            <th align="left">Type</th>
            <th align="left">Description</th>
        </tr>
        <tr>
            <td>Change Grade Item Total Button</td>
            <td>Button</td>
            <td>Opens pop up window (see next subsection)</td>
        </tr>
        <tr>
            <td>Choose File Button</td>
            <td>Button</td>
            <td>File dialog shows up allowing user to choose a Grade File</td>
        </tr>
        <tr>
            <td>Delete Button (X)</td>
            <td>Button</td>
            <td>Deletes the student entry it refers to</td>
        </tr>
        <tr>
            <td>Upload Grade File Button</td>
            <td>Button</td>
            <td>Updates marks and feedback for students using a <a href="http://ezmarker.herokuapp.com/documentation/requirements#1.3%20Definitions">grade file</a></td>
        </tr>
        <tr>
            <td>Upload Grades to [Brightspace Instance] Button</td>
            <td>Button</td>
            <td>Updates students' grades for the Grade Item to the Brightspace Instance. List of students and grades is created. Prompts user to update grade item total if grade value > grade item total. Prompts user to cancel operation and set a value if a grade input field is empty or contains non-numerical input</td>
        </tr>
        <tr>
            <td>Select All Check Box</td>
            <td>Check Box</td>
            <td>Adds all students enrolled in the course</td>
        </tr>
        <tr>
            <td>Search Input Field</td>
            <td>Input Field</td>
            <td>Dynamic search bar that changes its dropdown list of candidates everytime user types. Search for student name when user enters a letter first, otherwise searches for student ID</td>
        </tr>
        <tr>
            <td>Grade Field</td>
            <td>Input Field</td>
            <td>Manually inputs student's grade</td>
        </tr>
        <tr>
            <td>Comment Field</td>
            <td>Input Field</td>
            <td>Manually inputs feedback for student</td>
        </tr>
    </table>
    <h3>Change Grade Item Total (Pop up Window)</h3>
    <img class="prototype-img" src="../static/img/change_total_grade.png" />
    <table border="1">
        <col width="200">
        <col width="200">
        <col width="400">
        <tr>
            <th align="left">Field</th>
            <th align="left">Type</th>
            <th align="left">Description</th>
        </tr>
        <tr>
            <td>Close Button</td>
            <td>Button</td>
            <td>Closes popup window</td>
        </tr>
        <tr>
            <td>Update Total Button</td>
            <td>Button</td>
            <td>Changes the total maximum mark to user input in the text field</td>
        </tr>
        <tr>
            <td>Update Mark Text Field</td>
            <td>Text Field</td>
            <td>Allows user to enter a numeric value</td>
        </tr>
    </table>
    <h3>Change Student Grade (Pop up Window)</h3>
    <img class="prototype-img" src="../static/img/change_student_grade.png">
    <table border="1">
        <col width="200">
        <col width="200">
        <col width="400">
        <tr>
            <th align="left">Field</th>
            <th align="left">Type</th>
            <th align="left">Description</th>
        </tr>
        <tr>
            <td>Close Button (X)</td>
            <td>Button</td>
            <td>Closes popup window</td>
        </tr>
        <tr>
            <td>Set Grade Button</td>
            <td>Button</td>
            <td></td>
        </tr>
        <tr>
            <td>Skip Button</td>
            <td>Button</td>
            <td></td>
        </tr>
    </table>
    <h3>Report Page</h3>
    
    <p>Reports which users' grades were not set successfully.</p>
    
    <img class="prototype-img" src="../static/img/report_page.png" height:auto width:auto />
    <table border="1">
        <col width="200">
        <col width="200">
        <col width="400">
        <tr>
            <th align="left">Field</th>
            <th align="left">Type</th>
            <th align="left">Description</th>
        </tr>
        <tr>
            <td>Check Grades Button</td>
            <td>Button</td>
            <td>Links to Brightspace page with all of students' grades for the current grade item</td>
        </tr>
        <tr>
            <td>Logout Button</td>
            <td>Button</td>
            <td>Go to Logout Page</td>
        </tr>
        <tr>
            <td>Upload More Grades</td>
            <td>Button</td>
            <td>Returns user to Course List Page</td>
        </tr>
    </table>
    <h3>Logout Page</h3>
    <p>Brightspace generates logout page and handles logout.</p>

    <h2>Program Flow</h2>

    <img class="prototype-img" src="../static/img/Flow_Diagram.png" />

    <h2>Detailed Design</h2>

    <p> This section describes the back-end controllers and functions using high-level pseudocode.

        <h3>login()</h3>
        <ol>
            <li>Redirect user to Brightspace login page</li>
            <li>Create user object</li>
            <li>Redirect to Available Courses page</li>
        </ol>

        <h3>logout()</h3>
        <ol>
            <li>Redirects user to Brightspace logout page</li>
            <li>User has to return to ezMarker root in order to login again</li>
        </ol>

        <h3> modifyGradeTotal(gradeItem, total)</h3>
        <ol>
            <li>Grade item total is updated</li>
        </ol>

        <h3>setGradesFileData(file, gradeItem)</h3>
        <ol>
            <li>Parse file. Disregard grade if parameters are missing from record. Record which grades were not set</li>
            <li>Create grade object for valid grades</li>
            <li>Set grades</li>
            <li>Redirect user to Report page</li>
        </ol>

        <h3>setGradesManualData(grades[student, value], gradeItem)</h3>
        <ol>
            <li>Create grade objects</li>
            <li>Set grades</li>
            <li>Redirect user to Report page</li>
        </ol>

        <h2>Project Structure</h2>

        <ul id="file-structure">
            <li>/static</li>
            <ul id="file-structure">
                <li>/js</li>
                <ul id="file-structure">
                    <li>accordion</li>
                    <li>modal</li>
                </ul>
                <li>/css</li>
                <ul id="file-structure">
                    <li>elements</li>
                    <li>forms</li>
                    <li>home</li>
                    <li>main</li>
                    <li>nav</li>
                    <li>page-content</li>
                    <li>typography</li>
                </ul>
                <li>/templates</li>
                <ul id="file-structure">
                    <li>index</li>
                    <li>home</li>
                    <li>available_grades</li>
                    <li>upload</li>
                    <li>update_grade_item</li>
                    <li>report</li>
                </ul>
            </ul>
            <li>/Brightspace API Wrapper</li>
            <li>/app</li>
            <li>/conf_basic</li>
            <li>/requirements.txt</li>
        </ul>

        <h2 id="toc_exclude">Revision History</h2>
        <h3 id="toc_exclude">Version 1.0 - 10/23/2017</h3>
        <p>Authors: Sarah Johnston, Xiang Ke, Weibin Ma, Troy Nechanicky, Michelle Wong</p>
        <p>SQA: Zac Macdonald, Pirajeev Prabaharan</p>
</body>
<style>
    #file-structure {
        list-style: none;
    }
</style>
<style>
    img {
        width: 800px;
    }
</style>

</html>
